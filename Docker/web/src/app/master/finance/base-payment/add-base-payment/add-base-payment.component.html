<div class="container-fluid"><!--<loading-animation [loadingData]="loadingData"></loading-animation>-->   
	<div class="row row-background">
		<app-nav-bar></app-nav-bar>
		<!-- ngx bootstrap - Accordion -->
		<div class="col-lg-11 col-md-11 col-sm-11 col-xs-12  right-side-content pad0">
			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 usr-div create-view">
				<h4 class="padb10 padt10 colr-1e2f4d font-18 font-bold">
				<div *ngIf="addpage" l10nTranslate> Master.BasePayment.addTitle</div>
				<div *ngIf="editpage" l10nTranslate>Master.BasePayment.editTitle </div>	
				</h4>		 			
				<form class="user-detail font-sm" method="post" [formGroup]="basePaymentForm">
					<accordion>
						 <accordion-group #group [isOpen]="status.isFirstOpen" [isDisabled]="status.isFirstDisabled">
                <div accordion-heading  class="font-semibold" l10nTranslate>
                       Master.BasePayment.basicDetails 
                  <i class="pull-right float-xs-right glyphicon"
                  [ngClass]="{'acc-down': group?.isOpen, 'acc-up': !group?.isOpen}"></i>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 pad0">       
								
								<div class="form-group col-lg-4 col-md-4 col-sm-6 col-xs-12">
								<label for="usr-field" class="colr-red font-regular font-14" l10nTranslate >Master.BasePayment.termCode</label>
								<input type="text" class="form-control font-13 font-regular " [style.border-color]="getStyleForCode()" (focus)="baseCodeSuggestion($event)" formControlName="baseTermCode" id="" value="" [(ngModel)]="userRoleDataList.baseTermCode" [typeahead]="baseCodeList" placeholder="" maxlength="20">
									<small *ngIf="this.req_termCode" class="colr-red font-regular font-14" l10nTranslate>Master.BasePayment.EnterTermCode</small>
							</div>
							<div class="form-group col-lg-4 col-md-4 col-sm-6 col-xs-12">
								<label for="usr-field" class="colr-red font-regular font-14" l10nTranslate>Master.BasePayment.termName</label>
								<input type="text" class="form-control font-13 font-regular " [style.border-color]="getStyleForName()" (focus)="baseNameSuggestion($event)" formControlName="baseTermName" id="" value="" [(ngModel)]="userRoleDataList.baseTermName" placeholder=""  [typeahead]="baseNameList" maxlength="200">
								<small *ngIf="req_termName" class="colr-red font-regular font-14" l10nTranslate>Master.BasePayment.EnterTermName</small>
							</div>
							<div class="form-group col-lg-4 col-md-4 col-sm-6 col-xs-12">
								<label for="usr-field" class="colr-lblue font-regular font-14" l10nTranslate>Master.BasePayment.termDescription</label>
								<input type="text" class="form-control font-13 font-regular "  formControlName="baseTermDescription" id="PartyCode" value="" [(ngModel)]="userRoleDataList.baseTermDescription" placeholder="" maxlength="500">
							</div>
							<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 party-radio">
								<label for="usr-field" class="colr-red font-regular font-14" l10nTranslate>Master.BasePayment.CreditRisk</label>
									<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 pad0 clr-both font-regular font-14">
										<span class="radio pricing-details">
											<input type="radio" id="radio3" (click)="toHideLcBased()" formControlName="baseTermCreditRisk" value="Y"  [(ngModel)]="creditRiskpayment" >
											<label for="radio3">Yes</label>
										</span>
										<span class="radio pricing-details">
											<input type="radio" id="radio4" (click)="toShowLcBased()" formControlName="baseTermCreditRisk" value="N"  [(ngModel)]="creditRiskpayment" checked="checked">
											<label for="radio4">No</label>
										</span>
										<small *ngIf="req_crdit" class="colr-red font-regular font-14" l10nTranslate>Master.BasePayment.SelectCreditRisk</small>
									</div>
								</div>
							<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 party-radio" *ngIf="toShowLc">
								<label for="usr-field" class="colr-red font-regular font-14" l10nTranslate>Master.BasePayment.LCBased</label>
									<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 pad0 clr-both font-regular font-14">
										<span class="radio pricing-details">
											<input type="radio" id="radio6"  formControlName="baseTermLCBased" value="Y" [(ngModel)]="lcpayment"  >
											<label for="radio6">Yes</label>
										</span>
										<span class="radio pricing-details">
											<input type="radio" id="radio7" formControlName="baseTermLCBased" value="N" [(ngModel)]="lcpayment" checked="checked">
											<label for="radio7">No</label>
										</span>
										<small *ngIf="req_lcbased" class="colr-red font-regular font-14" l10nTranslate>Master.BasePayment.SelectLCBased</small>
									</div>
								</div>
							
					
                </div>
						 </accordion-group>
					</accordion>


          			<!--<h3 class="font-semibold">Nego Terms  </h3>-->
	<accordion>
						 <accordion-group #group2 [isOpen]="status.isFirstOpen" [isDisabled]="status.isFirstDisabled">
                <div accordion-heading  class="font-semibold" l10nTranslate>
                		Master.BasePayment.NegoTerms
                  <i class="pull-right float-xs-right glyphicon"
                  [ngClass]="{'acc-down': group2?.isOpen, 'acc-up': !group2?.isOpen}"></i>
                </div>

						<!--<div>
							<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 pad0 assoc_block">
													
							<div class="form-group col-lg-3 col-md-3 col-sm-4 col-xs-12 padr0">
									<label for="usr-field" class="colr-lblue font-regular font-14">Negotiation Term Code</label>
									<input type="text" class="form-control font-15 font-regular " id="PartyCode" value="" placeholder="">
								</div>
								<div class="form-group col-lg-3 col-md-3 col-sm-4 col-xs-12 padr0">
									<label for="usr-field" class="colr-lblue font-regular font-14">Negotiation Term Name</label>
									<input type="text" class="form-control font-15 font-regular " id="PartyCode" value="" placeholder="">
								</div>
								<div class="form-group col-lg-3 col-md-3 col-sm-4 col-xs-12 padr0">
									<label for="usr-field" class="colr-lblue font-regular font-14">Print Description </label>
									<input type="text" class="form-control font-15 font-regular " id="PartyCode" value="" placeholder="">
								</div>
								<div class="col-lg-1 col-md-2 col-sm-2 col-xs-2 accessories-block external_blck" style="float:left;">
									<span class="pull-left"><i class="plus-icn-md"> &nbsp; </i></span>
									<span class="pull-left"><i class="delete-icn-md"> &nbsp; </i></span>
								</div>
							</div>
						</div> -->
						  <div class="plants-detail-Stp">	
								<div formArrayName="baseNagotiationTerm">
									<div *ngFor="let feature  of getUserRoleArray(basePaymentForm); let i=index" >
										<!--<span style="display: none" > {{i + 1}}</span>-->
										<div  [formGroupName]="i">
												<app-base-payment-mapping  [group]="basePaymentForm.controls.baseNagotiationTerm.controls[i]" [title]="i" [financialCalendarModel]=financialCalendarModel></app-base-payment-mapping>
												<div class="col-lg-1 col-md-1 col-sm-6 col-xs-12 pad0 mart30 wid12">	
														<span class="pull-left"><i class="plus-icn-md" (click)="addPermissionMapping()" > &nbsp; </i></span>
														<span class="pull-left"><i class="delete-icn-md" (click)="removePermissionMapping(i) " > &nbsp; </i></span>
												</div>
												
										</div>
									</div>
								</div>	
							</div>

						 </accordion-group>
	</accordion>

                   <div *ngIf="whenDataNotTobeEdited">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 clr-both btn-footer">
						<div class="col-lg-2 col-md-2 col-sm-4 col-xs-4 pad0">
							<button type="reset" class="btn default-btn tertiary-btn singlebtn-width font-semibold font-18"  l10nTranslate >Master.BasePayment.Reset</button>
						</div>
						<div class="col-lg-l0 col-md-10 col-sm-8 col-xs-8 pull-right text-right pad0">
							<button type="button" id="save_party_master"  class="btn default-btn secondary-btn multiplebtn-width marr20 edit-form font-semibold font-18" (click)="saveBasePayment('Draft')" l10nTranslate >Master.BasePayment.Save</button>					
							<button type="button" id="save_party_master"  class="btn default-btn primary-btn multiplebtn-width edit-form font-semibold font-18" (click)="saveBasePayment('Save')" l10nTranslate >Master.BasePayment.Submit</button>					
						</div>							
					</div>						
					</div>
					<div *ngIf="whenDataEdited">
					 <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 clr-both btn-footer">
						<div class="col-lg-2 col-md-2 col-sm-4 col-xs-4 pad0">
							<button type="button" class="btn default-btn tertiary-btn singlebtn-width font-semibold font-18" (click)="cancel()" l10nTranslate >Master.BasePayment.Cancel</button>
						</div>
						<div class="col-lg-l0 col-md-10 col-sm-8 col-xs-8 pull-right text-right pad0">
							<button type="button" id="save_party_master"  class="btn default-btn secondary-btn multiplebtn-width marr20 edit-form font-semibold font-18" (click)="update()" l10nTranslate >Master.BasePayment.Save</button>					
							<button type="button" id="save_party_master"  class="btn default-btn primary-btn multiplebtn-width edit-form font-semibold font-18" (click)="updatewithStatus('Active')" l10nTranslate >Master.BasePayment.Submit</button>					
						</div>
						</div>							
					</div>
					<div *ngIf="whenStatusInactive">
					 <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 clr-both btn-footer">
						<div class="col-lg-2 col-md-2 col-sm-4 col-xs-4 pad0">
							<button type="button" class="btn default-btn tertiary-btn singlebtn-width font-semibold font-18" (click)="cancel()" l10nTranslate >Master.BasePayment.Cancel</button>
						</div>
						<div class="col-lg-l0 col-md-10 col-sm-8 col-xs-8 pull-right text-right pad0">
							<button type="button" id="save_party_master"  class="btn default-btn secondary-btn multiplebtn-width marr20 edit-form font-semibold font-18" (click)="update()" l10nTranslate >Master.BasePayment.Update</button>					
						
							<button type="button" id="save_party_master"  class="btn default-btn primary-btn multiplebtn-width edit-form font-semibold font-18" (click)="updatewithStatus('Active')" l10nTranslate >Master.BasePayment.Reactivate</button>					
											
						</div>
						</div>							
					</div>
					<div *ngIf="whenStatusactive">
					 <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 clr-both btn-footer">
						<div class="col-lg-2 col-md-2 col-sm-4 col-xs-4 pad0">
							<button type="button" class="btn default-btn tertiary-btn singlebtn-width font-semibold font-18" (click)="cancel()">Cancel</button>
						</div>
						<div class="col-lg-l0 col-md-10 col-sm-8 col-xs-8 pull-right text-right pad0">
							<button type="button" id="save_party_master"  class="btn default-btn secondary-btn multiplebtn-width marr20 edit-form font-semibold font-18" (click)="update()" l10nTranslate >Master.BasePayment.Update</button>					
						
							<button type="button" id="save_party_master"  class="btn default-btn primary-btn multiplebtn-width edit-form font-semibold font-18" (click)="updatewithStatus('InActive')" l10nTranslate >Master.BasePayment.Deactivate</button>					
											
						</div>
						</div>							
					</div>

				<!--Duplicate basse code Pop up-->
			<div class="modal fade delete-popup" bsModal #pagebackModal ="bs-modal" [config]="{backdrop: 'false',show: false}" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
						<div class="modal-dialog ">
										<div class="modal-content  del-modal">
										<div class="modal-header text-center">
											<!-- <a data-dismiss="modal" class="class pull-right"><span style="color:grey !important;" class="glyphicon glyphicon-remove" (click)="cancel()"></span></a>                                                                               -->
											<img src="../../assets/image/Confirm_Delete.svg" />
										</div>
														<div class="modal-body">
																						
																						<div class="col-md-12 product_img text-center font-14 font-regular">
																								{{basePaymentService.errorMessage}}
																						</div>
														</div>
														<div class="del-btn-group modal-window-footer btn-shodow">
																		<div class="del-pop-btn col-lg-6 col-md-6 col-sm-6 pad0 pull-left"><button class="width-full del-cancel del-cancel-button btn btn-default font-14 font-regular bw-cancel" (click)="pagebackModal.hide()" l10nTranslate >Master.BasePayment.Cancel</button></div>
																		<div class="del-pop-btn col-lg-6 col-md-6 col-sm-6 pad0 pull-left"><button class="width-full del-confirm del-button btn btn-default confirm-delete  font-14 font-regular primary" (click)="pagebackModal.hide()" l10nTranslate >Master.BasePayment.OK</button></div>
														</div>
										</div>
						</div>
				</div>
              <!--Duplicate basse code Pop up-->
				</form>


<div *ngIf="errormodal" [style.display]="showModal ? 'block' : 'none'" (onHidden) = "onHidden()" class="modal fade something_wrong"  bsModal #deletesuccessModal="bs-modal" [config]="{backdrop: 'false',show: true}" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">

    <div class="modal-dialog">
        <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title font-14 font-regular"><img src="../../assets/image/Error Message_Icon.svg"/>This page contains {{count}} errors.Please correct the highlighted fields.</div>
                </div>
        </div>
    </div>
</div>

<div class="modal fade something_wrong" bsModal #serverError ="bs-modal" [config]="{backdrop: 'false',show: false}" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title font-14 font-regular"><img src="../../assets/image/Error Message_Icon.svg"/>{{errorMsg}}</div>
                </div>
        </div>
    </div>
</div>
			</div>
		</div>
	</div>
</div>
    